{% assign files = site.static_files | where_exp: "file", "file.path contains include.path" %}
{% for file in files %}
  {% assign path_parts = file.path | split: "/" %}
  {% assign folder_depth = include.path | split: "/" | size %}
  {% if path_parts.size == folder_depth | plus: 1 %}
    {% unless file.name == "README.md" or file.name == "index.html" or file.name == "script.js" %}
      <li>
        {% if file.extname == "" %}
          {% assign subfolder = file.path | split: "/" | last %}
          <details open>
            <summary>{{ subfolder }}</summary>
            <ul>
              {% capture new_path %}{{ include.path }}/{{ subfolder }}{% endcapture %}
              {% include file_tree.html path=new_path %}
            </ul>
          </details>
        {% else %}
          <a href="{{ site.baseurl }}{{ file.path }}" target="_blank">{{ file.name }}</a>
        {% endif %}
      </li>
    {% endunless %}
  {% endif %}
{% endfor %}
